<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>For You ‚ù§Ô∏è</title>

<style>
body{
margin:0;
font-family:'Comic Sans MS',cursive;
color:white;
text-align:center;
overflow:hidden;
background:linear-gradient(135deg,#ff7aa2,#ff9a9e,#fbc2eb,#a18cd1);
background-size:400% 400%;
animation:bg 12s infinite alternate;
touch-action:manipulation;
}

@keyframes bg{0%{background-position:0% 50%}100%{background-position:100% 50%}}

.page{
display:none;
min-height:100dvh;
width:100%;
align-items:center;
justify-content:center;
padding:20px;
position:fixed;
top:0;
left:0;
}

.show{display:flex;flex-direction:column}

.card{
background:rgba(255,255,255,.2);
backdrop-filter:blur(12px);
padding:24px;
border-radius:24px;
max-width:520px;
width:92%;
position:relative;
z-index:5;
}

button{
padding:12px 26px;
border:none;
border-radius:40px;
background:linear-gradient(45deg,#ff4d88,#ff9a9e);
color:#fff;
font-size:18px;
margin:10px;
cursor:pointer;
z-index:10;
position:relative;
-webkit-tap-highlight-color: transparent;
touch-action:manipulation;
}

button:active{transform:scale(.95)}

#noBtn2{
position:absolute;
left:50%;
top:65%;
transform:translate(-50%,-50%);
}

.floatName{
position:fixed;
bottom:-20px;
animation:up 8s linear infinite;
opacity:.8;
pointer-events:none;
z-index:1;
}

@keyframes up{to{transform:translateY(-120vh);opacity:0}}

#letter{
white-space:pre-line;
font-size:18px;
line-height:1.7;
min-height:200px;
}

.pulse{animation:pulseBg 1s infinite alternate}
@keyframes pulseBg{from{filter:brightness(1)}to{filter:brightness(1.25)}}
</style>
</head>

<body>

<div id="start" class="page show">
<div class="card">
<h2>Play song first üéß</h2>
<p>Tap below ‚Äî then continue</p>
<button onclick="startExperience()">Play & Start</button>
</div>
</div>

<div id="q" class="page">
<div class="card">
<h2 id="qText"></h2>
<button onclick="nextQ()">Always remember ‚ù§Ô∏è</button>
</div>
</div>

<div id="letterPage" class="page">
<div class="card">
<h2>For you‚Ä¶</h2>
<p id="letter"></p>
<button onclick="showProposal()">Continue üíå</button>
</div>
</div>

<div id="proposal" class="page">
<div class="card">
<h1>Will you be my Valentine? üíò</h1>
<button onclick="yesAction()">YES</button>
<button id="noBtn2" ontouchstart="move(this)" onmouseover="move(this)">No</button>
</div>
</div>

<script>

const spotify="https://open.spotify.com/track/5jkH9Pgv28mW9ve6uGtohT?si=SZ19qpJiQ8iNSmpqHk-zXw";
const name="Choyal ‚ù§Ô∏è";

const questions=[
"Do you remember our first chat? üí¨",
"Our first meet? ü•π",
"First bike ride? üèçÔ∏è",
"First hug? ü§ç",
"First kiss? ‚ù§Ô∏è"
];

let qi=0;

function show(id){
document.querySelectorAll('.page').forEach(p=>p.classList.remove('show'));
document.getElementById(id).classList.add('show');
}

/* ‚≠ê FIXED FUNCTION */
function startExperience(){

// open spotify but DO NOT navigate away
let win=window.open(spotify,'_blank');

if(!win){
alert("Allow popups for music üéß then tap again ‚ù§Ô∏è");
return;
}

// continue experience after small delay
setTimeout(()=>{
show('q');
ask();
},1200);
}

function ask(){
document.getElementById('qText').innerText=name+"\n"+questions[qi];
}

function nextQ(){
const btn=document.querySelector('#q button');
btn.disabled=true;
setTimeout(()=>{btn.disabled=false;},350);

qi++;
if(qi<questions.length){
ask();
}else{
show('letterPage');
document.getElementById('letter').innerText="";
setTimeout(typeLetter,300);
}
}

function typeLetter(){
document.body.classList.add('pulse');

let text=`Hi choyal
Namma first friends dhaan‚Ä¶ casual talks, random laughs, time pass chats‚Ä¶
Aana epdi nu theriyama slowly nee en life-la romba mukkiyam aayita ü•∫
Friends irundhathu romba azhaga irundhuchu‚Ä¶ aana lovers aana apram dhaan purinjidhu
you are actually the best version of my life.
Nee dhaan en sunshine ‚òÄÔ∏è
When the whole world feels against me, I run to you‚Ä¶ because you are my safest place ü§ç
Un kooda pesama oru naalum complete aagathu‚Ä¶
Enaku nee romba romba pudikum‚Ä¶
Life la enna nadandhaalum forever dhaan ü§û
Happy Valentine‚Äôs Day üíò
Always yours ü´∂
Dhivya`;

let i=0;
let el=document.getElementById('letter');

let t=setInterval(()=>{
el.innerText+=text[i++];
if(i>=text.length)clearInterval(t);
},28);
}

function showProposal(){
document.body.classList.remove('pulse');
show('proposal');
}

function yesAction(){
for(let i=0;i<80;i++){
let h=document.createElement('div');
h.className='floatName';
h.innerText=name;
h.style.left=Math.random()*100+'%';
h.style.fontSize=(14+Math.random()*26)+'px';
document.body.appendChild(h);
setTimeout(()=>h.remove(),8000);
}
alert('Text me how you feel ü•π');
}

function move(b){
let x=Math.random()*70+10;
let y=Math.random()*70+10;
b.style.left=x+'%';
b.style.top=y+'%';
}

</script>
</body>
</html>